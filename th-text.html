<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../thelma-core/thelma_core.html">


<polymer-element name="th-text" extends="th-animated" attributes="align type markdown text width">
  <template>
    <core-style ref="theme"></core-style>
    <style>
      :host {
        width: {{width + "px"}};
        color:{{color}};
      }

      #container > * {
        margin: 0;
        -webkit-margin-before: 0;
        -webkit-margin-after: 0;
        text-align: {{align}};
      }

      strong {
        font-weight: bold;
      }

      em {
        font-style: italic;
      }

      ul {
        list-style-type: disc;
      }

      ol {
        list-style-type: decimal;
      }


    </style>
    <div id="container" class="{{type}}" style="color:{{color}};"><content></content></div>
  </template>
  <script src="../marked/lib/marked.js"></script>

  <script>

      Polymer('th-text', {
        type: "mainpoint",  // options: headline, mainpoint, submainpoint, subpoint, chart, label, caps
        align: "left",  // options: left, right, center, justify
        markdown: true, // set false if other components are embedded (i.e. countup)
        domReady: function() {
          this.$.container.className = this.type;
          if (this.markdown) {
            this.text = this.trim(this.textContent);
          }
        },
        textChanged: function() {
          this.$.container.innerHTML = this.markdown ? marked(this.text.toString()) : this.textContent;
        },
        trim: function(str) { 
          return str.replace(/^[^\S\n]+/gm,'');
        }
      });

  </script>
</polymer-element>