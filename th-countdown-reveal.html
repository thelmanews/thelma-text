<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="thelma_core.html">

<polymer-element name="th-countdown-reveal" extends="th-animated" attributes="startFrom color width height" >

  <template>
      <core-style ref="theme"></core-style>
      <style>
        :host {
          width: {{width}};
          height: {{height}};
        }

        #content {
          position: absolute;
          display: table-cell;
          vertical-align: middle;
          margin-top: 10px;
        }

        #countdown {
          position: absolute;
          top: 0;
          text-align: center;
          font-size: {{height}};  
          color: {{color}};
        }

        .hidden {
          opacity: 0;
        }

        .fadeout {
          -webkit-opacity: 0;
          -moz-opacity: 0;
          opacity: 0;
          -webkit-transition: all 1s ease;
          -moz-transition: all 1s ease;
          -ms-transition: all 1s ease;
          -o-transition: all 1s ease;
          transition: all 1s ease;
        }

        .fadein {
          -webkit-opacity: 1;
          -moz-opacity: 1;
          opacity: 1;
          -webkit-transition: all 3s ease;
          -moz-transition: all 3s ease;
          -ms-transition: all 3s ease;
          -o-transition: all 3s ease;
          transition: all 3s ease;
        }

      </style>
      <div id="container" class="mainpoint"> <span id="countdown">{{number}}</span><div id="content" class="hidden"><content></content></div></div>
  </template>

  <script>

      Polymer('th-countdown-reveal', {
        startFrom: 3,
        width: '150px',
        height: '250px',
        color: '',
        animationSpeed : 1, 
        init: function() {
          var self = this;
          
          self.number = self.startFrom;
          self.content = this.$.content;
          self.countdown = this.$.countdown;
                        
        },
        reset: function() {
          var self = this;

          self.number = self.startFrom;
          self.countdown.className = 'fadein';
          self.content.className = 'fadeout';

        },
        animate: function() {
          var self = this;

          var countdown = setInterval(function(){
            if (self.number > 1){
              self.number--;
            } else {
              self.countdown.className = 'fadeout';
              self.content.className = 'fadein';
              clearInterval(countdown);
            }
          }, self.animationSpeed * 1000)
        }
      });

  </script>


</polymer-element>
